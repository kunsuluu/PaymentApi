# PaymentApi


Простое API на ASP.NET Core с JWT и SQLite. Реализованы три эндпоинта:  
- `POST /api/Auth/login` — вход, выдаёт JWT-токен  
- `POST /api/Auth/logout` — делает токен недействительным  
- `POST /api/Payment` — списывает 1.1 USD с баланса при успешной авторизации  

При создании пользователя баланс равен 8.00 USD, все платежи сохраняются в таблице `Payments`.  
Пароли хранятся в виде хеша (Bcrypt), поддерживаются несколько сессий, есть защита от брутфорса.  
Платежи выполняются в транзакции, баланс и суммы хранятся как `decimal(18,2)` для корректных финансовых операций.  
Swagger доступен по адресу: `https://localhost:7124/swagger`.  

Тестовый пользователь:  
- **username:** `test`  
- **password:** `P@ssw0rd!`  

> ⚠️ В коде временно добавлен блок сброса баланса пользователя `test` до 8.00 для удобства тестирования.  
> В реальной логике этот блок не нужен, так как баланс должен изменяться только через платежи.  

Пример временного блока:
```csharp
else
{
    existingUser.Balance = 8.00m;
}
